---
title: GivTech慈善公益系统应用设计说明书
author: 张宇豪
date: 2024/3/29 23:00
categories:
 - Solidity
tags:
 - Solidity
---

# GivTech慈善公益系统应用设计说明书

## 1.引言

### 1.1 产品概述

### 1.2 目标受众



## 2.项目概述

### 2.1 项目背景

#### 2.1.1 慈善公益的需求

慈善公益是社会发展中不可或缺的一部分，然而，传统的慈善捐款和公益活动存在一些问题，如捐款信息的安全性和透明度难以保证，以及捐款过程中的效率和透明度不足。为了解决这些问题，基于区块链的慈善公益系统应运而生。

#### **2.1.2** 区块链技术的优势

基于区块链的慈善公益系统利用区块链技术的去中心化、不可篡改和安全可靠等特点，能够确保慈善捐款信息不被篡改，提高捐款过程中的效率和透明度，并保障捐款人的权益。区块链技术能够记录和追踪每一笔捐款交易，使其变得透明可信，增强慈善机构的信誉和管理能力。

#### 2.1.3 适用场景

基于区块链的慈善公益系统适用于各种需要保证捐款信息安全性和透明度的公益场景。例如，在灾区救援中，该系统可以支持公益慈善平台发起公益活动，并允许所有用户参与公益物资捐赠。物流商公司负责物资的配送，整个过程中的各个环节都会被记录在区块链上，实现透明和公开操作。此外，个人还可以通过该系统以个人形式发起公益基金的募资活动，参与者可以通过提供有效的证明和描述信息，并经过认可和投票的方式参与决策。在募资活动结束后，参与方的用户地址将被溯源上链，用户可以查询所有参与方的溯源信息，确保公益活动的可信度和透明度。

#### 2.1.4 项目目标

本项目旨在开发一个基于FISCO BCOS的慈善公益全链路系统，利用区块链技术确保慈善捐款信息的安全性、透明度和可信度。通过该系统，我们希望能够实现以下目标：

- 提供一个安全可靠的平台，确保慈善捐款信息不被篡改。
- 提高捐款过程中的效率和透明度，保障捐款人的权益。
- 增强慈善机构的信誉和管理能力，提升公众对慈善机构的信任度。
- 支持灾区救援等公益活动的发起和参与，实现物资捐赠的透明和公开。
- 提供个人发起公益基金募资活动的功能，确保募资过程的可信度和透明度。

通过实现这些目标，我们期望能够推动慈善公益领域的创新与发展，为社会公益事业做出积极的贡献。

### 2.2 需求分析

#### 2.2.1 需求场景

需求场景描述了项目中的具体应用场景和使用情境。根据项目背景，我们可以确定以下需求场景：

- 场景1: 公益物资捐赠活动：用户可以参与公益慈善平台发起的物资捐赠活动，包括对灾区的捐赠。用户可以选择捐赠物资的种类和数量，并通过系统参与投递物资的流程。
- 场景2: 个人公益基金募资活动：个人可以通过系统发起公益基金募资活动，提供相关证明和描述信息，并邀请其他用户参与和支持募资活动。

#### 2.2.2 背后目标

背后目标描述了项目的目标和期望的结果。根据项目背景，我们可以确定以下背后目标：

- 目标1: 提高慈善捐款信息的安全性和透明度：确保捐款信息不被篡改，增加捐款人的信任度，提高慈善机构的信誉。
- 目标2: 提高捐款过程的效率和透明度：简化捐款过程，减少中间环节，提高资金流转的透明度，确保捐款资金的准确到达目标地点。
- 目标3: 提供溯源功能和信息查询：记录和追踪每一笔捐款交易和物资流转，实现对慈善公益活动的溯源，让用户能够查询公益募资活动的参与方和资金流向。

#### 2.2.3 产品功能

产品功能描述了系统需要提供的具体功能和特性。根据项目背景，我们可以确定以下产品功能：

- 功能1: 用户注册和身份验证：提供用户注册和身份验证功能，确保用户身份的真实性和安全性。
- 功能2: 公益物资捐赠管理：支持公益物资捐赠活动的发起、物资种类和数量的选择，以及捐赠物资的投递流程管理。
- 功能3: 个人公益基金募资管理：支持个人发起公益基金募资活动，包括募资目标设定、证明和描述信息的提供，以及募资活动的认可和票选机制。
- 功能4: 溯源和信息查询：记录和展示公益募资活动的参与方和资金流向的溯源信息，提供用户查询功能，确保公益活动的可信度和透明度。
- 功能5: 安全和隐私保护：采用区块链技术确保捐款信息的安全性，保护用户的隐私数据，防止信息篡改和未授权访问。

#### 2.2.4 用户群体及需求分析

**目标用户：**

1. 慈善机构：需要更好的透明度和账目记录，以提高信任度和资金管理效率。

2. 捐赠者：希望了解他们的捐款如何被使用，并希望获得及时的反馈和报告。

3. 志愿者：需要更好的参与和协作机制，以便更好地支持慈善项目和活动。


**用户需求：**

1. 慈善机构需要一个透明度高、安全可靠的平台，用于记录和管理资金流动、项目进展和成果报告。

2. 捐赠者希望能够追踪和验证他们的捐款如何被使用，以及项目的实际影响和效果。

3. 志愿者需要一个便捷的平台，可以查看和参与慈善项目的需求、任务和进展。


#### 2.2.5 区块链技术分析

**区块链优势：**

1. 去中心化：区块链技术可以建立一个去中心化的平台，消除了传统中介机构的需求，增加了透明度和信任度。

2. 透明度：区块链上的交易和数据是公开可查的，慈善机构、捐赠者和志愿者可以实时查看和验证相关信息。

3. 不可篡改性：区块链上的数据一旦被记录，就无法被篡改，确保了数据的完整性和可信度。

4. 安全性：区块链使用密码学技术保护数据的安全性，防止数据被篡改或盗窃。


#### 2.2.6 需求总结和优先级排序

1. 捐款追踪功能：捐赠者能够通过区块链平台追踪和验证他们的捐款如何被使用。优先级：高。

2. 项目进展和成果报告：慈善机构能够实时记录和展示项目的进展情况，并向捐赠者提供详细的成果报告。优先级：高。

3. 志愿者协作平台：提供一个便捷的平台，让志愿者可以查看慈善项目的需求、任务和进展，并参与其中。优先级：中。

4. 数据隐私保护：确保用户的个人信息和交易数据在区块链上得到保护，同时满足隐私法规的要求。优先级：中。

5. 智能合约功能：利用智能合约实现自动化的捐款和资金分配机制，提高效率和透明度。优先级：低。


### 2.3 项目来源

#### 2.3.1 公益慈善突出问题

**信息公开程度低，监管缺乏手段**传统公益慈善组织的信息公开透明度低，监管机制缺位，公信力不足。据调查，公益组织的“资金去向与使用状况”以及“善款来源”是公众关注的焦点，而传统公益机构经常信息披露不足。从本次疫情爆发的红十字会事件来看，由于物资来源不透明、去向不可知、信息公开不及时，以及政府对慈善组织的监管手段缺乏、社会监督力量薄弱，导致红十字会公信力下降，影响了公众对公益组织的信心与支持度。

“**互联网+公益**”无法解决信用问题“互联网+公益”创新模式已经被用到实践中，但是同样面临信用风险和监管问题。随着互联网技术的发展，网络公益众筹平台如轻松筹、水滴筹、爱心筹等快速发展，一方面有效帮助了数以万计的困难群众，缓解了政府的财政压力；另一方面也暴露出一些问题，互联网的开放性特征，使得众筹平台难以对发起者与受益者的信息进行有效筛查，个别求助者虚构病情、部分平台线上业务流程不合规、用户数据被滥用、个别平台涉嫌非法筹集资金等问题频现。这不仅对捐助者的基本权益造成了侵害，同时也削弱了群众对于网络公益众筹活动的信任，制约了公益事业的可持续发展。

因此，急需一种合适的技术手段或合理的机制来解决社会民众持续增长的公益慈善需求与当前公益慈善组织公信力不足之间的矛盾。

**区块链可以实现有效的激励，具有价值优势**公益项目的参与方是不同利益主体，需要尽可能照顾各方利益，才能激发更多参与者的积极性。如在本次疫情中，存在很多社会志愿者和慈善人士。由于公益项目的非营利性，吸引各方积极参与的不再是经济利益的分配，参与方的出发点可能是同情心、家乡情、社会声誉、个人英雄主义、企业文化、社会研究等。面对参与者的不同出发点，区块链的激励相容机制可以实现多方利益的共赢，实现社会价值最大化。

#### 2.3.2 项目的由来

本项目的来源是对当前慈善公益领域存在的问题和挑战的观察和分析。慈善机构在运作过程中面临着透明度不足、捐款追踪困难和项目管理繁琐等问题，这导致了捐赠者的信任度下降，同时也限制了慈善公益事业的发展和影响力的扩大。因此，我们意识到区块链技术的特性可以为慈善公益带来巨大的改进和潜力。

区块链技术的去中心化、透明度和安全性等特点，使其成为解决慈善公益问题的理想选择。通过建立一个基于区块链的慈善公益系统，我们可以实现捐款的追踪和验证，项目进展的实时记录和展示，以及成果报告的透明可信。这将增加捐赠者对慈善机构的信任，提高慈善公益的透明度和效率。同时，智能合约机制的应用将自动化捐款和资金分配，提高资金管理的效率和准确性。

综上所述，本项目的来源是对慈善公益领域问题的观察和分析，以及对区块链技术在解决这些问题中的潜力的认识。通过应用区块链技术，我们希望改善慈善公益的透明度和效率，促进慈善事业的可持续发展，实现更大的社会影响力。



## 3.解决方案概述

### 3.1 方案目标

我们的方案旨在利用区块链技术改进慈善公益领域的效率、透明度和信任度。通过建立一个基于区块链的慈善公益系统，我们的目标是实现以下几个方面的改进：

（1）透明度和信任度的提升： 我们的系统将通过区块链技术实现捐款的追踪和验证。捐款记录将被永久地记录在区块链上，捐款人可以随时查看和验证其捐款的使用情况。这将增加捐赠者对慈善机构的信任，促进更多人参与到慈善公益事业中。

（2）捐款和资金分配的自动化： 我们的系统将利用智能合约机制实现捐款和资金分配的自动化。捐款将根据预设的规则和条件自动分配给指定的项目或受益人，确保资金的准确分配和高效管理。这将提高资金管理的效率和准确性，减少人为错误和滥用的风险。

（3）项目进展的实时记录和展示： 我们的系统将记录项目的进展情况，并将其实时展示给捐赠者和利益相关者。通过区块链的不可篡改性和透明度，捐赠者可以随时了解项目的执行情况，包括资金使用、项目成果和影响力等方面的信息。这将增加慈善机构的透明度，提高捐赠者的参与感和满意度。

（4）简化的捐款流程： 我们的系统将提供简化的捐款流程，使捐款变得更加便捷和安全。通过使用加密货币或数字支付方式，捐款人可以轻松完成捐款，并获得相应的捐赠凭证和记录。这将提高捐款的便利性和安全性，吸引更多人参与到慈善公益事业中。

### 3.2 主要功能

### 3.3 非功能性要求

### 3.4 系统架构概述

基于区块链的慈善公益系统架构图主要分为七层，由上到下分别是用户层、视图层、应用层、业务层、数据层、区块链层、基础设施层。该系统架构支持使用分布式部署和容器化部署、全服务支持容器化部署，包含了基础的数据存储服务MySQL、Redis以及消息中间件服务Rabbitmq。针对区块链层我们使用的是FISCO BCOS + WeBASE作为底层的区块链平台和区块链网络，通过智能合约进行数据的上链服务操作，业务层跟数据层进行智能合约与区块链的交互使用的是SDK。

**（1）平台的支持**

基于X86架构的Linux通用服务器部署，该系统架构适配H5、Web应用、Uniapp小程序进行访问，同时使用鉴权认证服务保障了用户的数据安全和隐私。提供可视化的服务监测对业务数据支持定向导出。

**（2）开发的支持**

支持分布式的容器化部署方案同时也支持使用Dockerfile对服务制定对应的镜像，提供了系统的可扩展性和便移植性、业务交互支持多种语言的SDK，不仅限于Java、支持Python、Golang以及其他的语言。

**（3）业务的支持**

本架构主要实现了两个模块的业务，分别是公益活动管理以及用户业务管理、支持后期的功能模块的扩展，包括针对积分奖励模块的功能是否需要对接NFT平台，实现数字化交易一体的慈善公益溯源系统。

![img](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/asynccode?imageSlim)

### 3.5 业务流程设计

#### 3.5.1 公益慈善活动业务流程

公益慈善活动的各个步骤和参与者之间的关系。代理机构发起物资捐赠活动并提供目标地址，慈善公益平台接收物资捐赠请求并确认捐赠信息，参与方通过慈善公益平台进行物资捐赠并填写运输订单，物流商添加物流信息并运输物资到代理机构，最后代理机构进行签收和管理物资。

![img](https://yw742c34bos.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDdlN2M5ZGU4ZDhmMzhmYTI1MmI4ZjMxMjkzMGM1M2FfS2R1ZHNOd3JYWTVmTnBDVE5oZk1BWDBvS1MycGRQRnJfVG9rZW46VlU2UmJzM0hnb1k0ajl4QXZsYWNtbnVrbnZmXzE3MTE2MzE2NzY6MTcxMTYzNTI3Nl9WNA)

该业务流程的UML时序图：

![img](https://yw742c34bos.feishu.cn/space/api/box/stream/download/asynccode/?code=OWVlNjJiOTZmNjBhYmVjMGRkMDE0MDM4MjhiOTVjMWJfZzBVd0NpNXhFeUV1OUVidFFRTHNRWW8yUVF3NWRYeDNfVG9rZW46REhqZmJ4WmRWb3ppVDF4MnJ4eWNDTm94bjJiXzE3MTE2MzE2NzY6MTcxMTYzNTI3Nl9WNA)

#### 3.5.2 公益募资活动业务流程

用户发起公益募资活动并上传证明信息。然后发起票选，如果票选结果大于50%，则通过，否则不通过。如果不通过，募资活动结束。如果通过，进行公益捐款的阶段。参与方可以进行票选和捐款，并且捐款和参与方都会自动添加溯源到这个公益募资活动中。公益募资活动保持公开透明。在募资活动结束后，用户需要验证身份，然后进行提现操作。

![img](https://yw742c34bos.feishu.cn/space/api/box/stream/download/asynccode/?code=OWUzYTBkNGEzNTYxNmIxOTJlZGJjNjhkMjE2MTk5MGVfU1RPR3I5a1c0bFJmUjlMcEwzbTFIMVRpOUJpUmxJOTlfVG9rZW46WDNzRmJNM2pVb3FWQTZ4bG0yaGNka3Jwbld5XzE3MTE2MzE2NzY6MTcxMTYzNTI3Nl9WNA)

该业务的UML时序图：

![img](https://yw742c34bos.feishu.cn/space/api/box/stream/download/asynccode/?code=ZThlODI3ZDI3Mjk5ZjhlNjllNjJmYzFkYzI1NTk2MzlfcWVibGlFWnJxdU1INThEWE9NdU10cjB6Tnc4cDI2NXpfVG9rZW46WmFWb2JiUDU4b0hMSzZ4OXQ3WGNUZXF0blVoXzE3MTE2MzE2NzY6MTcxMTYzNTI3Nl9WNA)

#### 3.5.3 公益活动溯源管理业务流程

用户通过慈善公益平台进行查询，可以点击当前的活动和详细或者更多来查询当前参与公益物资捐赠的溯源地址以及物品信息，包括物流信息和进度状况。成功参与的用户可以通过溯源记录查看自己的记录。当公益溯源上链成功后，用户可以获得对应的积分奖励。

![img](https://yw742c34bos.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmJkNjRjZGJhNzUzZTgwOGI0NWZlZTM3ZmQwN2RmY2Rfc2FBbDh0SHF1QUdNeE5pVUZyRlFhU1B3bnNBRWVzWTZfVG9rZW46UmpmNmJ2Sml2b1FaN014MEFheGNyWTdwbjJjXzE3MTE2MzE2NzY6MTcxMTYzNTI3Nl9WNA)

该业务的UML时序图：

![img](https://yw742c34bos.feishu.cn/space/api/box/stream/download/asynccode/?code=OTgxMjM2NGNlYzQyYjBhZjE5ZWFmYjg1Njk2ZjMzNWVfdlVJT2x4RzltMWh3Smp2bDVkdHU3dENYSFNjeTlEVW1fVG9rZW46VjRMcGI5UnhDb0lIVkp4cms3WGNiUVBFbkZiXzE3MTE2MzE2NzY6MTcxMTYzNTI3Nl9WNA)

#### 3.5.4 公益记录溯源追踪业务流程

![img](https://yw742c34bos.feishu.cn/space/api/box/stream/download/asynccode/?code=NGZhYjhhNzMyNTVhOGZmYjE2OWFkMTVmNmJjYzAxNGVfbmdnVUFpQTFoZ3RwaXhGUzJuRkNoT1Y4RW1nQUxvYTlfVG9rZW46VkxFMWJweWx4b3hKb0R4VW5FcmNOQWtRbjVnXzE3MTE2MzE2NzY6MTcxMTYzNTI3Nl9WNA)

该业务的UML时序图：

![img](https://yw742c34bos.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTAwYjFhOWM0Y2Y5NjdjOWQ2ZmNiMGZlNTEyZDY5MDVfVkc0OWJSUlhqN3dXTjBLYzQ0Um1YbmJSenFIeW1yRjlfVG9rZW46VXhsdmJpVFRZb1dKTlJ4SGp3QWNQZWlQbkJlXzE3MTE2MzE2NzY6MTcxMTYzNTI3Nl9WNA)

## 4.功能设计

### 4.1 登录注册功能

#### 4.1.1 普通用户登录注册

当前的测试注册是成功的，我使用的是用户名密码加上验证码进行注册功能，然后整个注册流程是用户先输入表单注册，系统会根据如下流程进行功能的实现：

- 校验当前的验证码和用户是否已经存在
- 注册为系统的普通用户
- 手动绑定系统的角色权限
- 注册为区块链的用户
- 使用rabbitmq发送订阅消息指定路由key为REGISTER的交换机提供给消费者消费
- 接收到消息的消费者进行消费并将用户信息进行上链存储

#### 4.1.2 机构用户登录

使用管理员账户登录后端，添加用户绑定角色为机构用户，该机构具备的权限为，发布公益活动，和代理接收物资的功能。

#### 4.1.3 物流商登录

使用管理员账户登录后端，添加用户绑定角色为物流商用户，该物流商具备的功能为，查看当前的物流订单情况，包括添加当前的运输物流订单情况。

### 4.2 查询公益信息功能

查询公益信息功能分为两部分的功能：

1. 公益募资的活动信息查询：
   1. 由于链上的信息数据和数据库中的数据是同步的，不能在区块链上做分页查询。直接分页查询数据库中的数据信息。
2. 公益灾区活动信息查询:

### 4.3 查询个人信息功能

查询个人信息功能主要是使用多表联查把系统用户的信息以及区块链账户的用户信息一起查询出来，然后封装到一个Vo对象中去，这里的查询个人信息功能没有使用Redis缓存，主要是当前的个人信息功能更新过快担心Redis缓存不同步的问题。

### 4.4 发布公益募资功能

功能实现步骤：

- 添加发起公益募资的基本表单信息
- 上传对应的证明信息
- 机构可以进行审核
- 进行票选结果
- 票选通过进行公益募资过程
- 募资完成之后可以进行公益反馈
- 查看完整的公益溯源

发布公益募资功能当前需要先添加发起公益募资活动的表单信息，然后需要点进去上传当前对应的证明信息，根据上传的证明信息添加一条审核内容的信息，这里的审核主要是对证明信息进行审核，然后就可以进行票选结果，用户可以对该公益募资活动进行票选，如果票选通过之后，就可以进行公益募资。

### 4.5 发布公益活动功能

### 4.6 参与公益募资活动投票功能

### 4.7 参与公益捐款活动功能

参与公益捐款的方式有两种，一种是选择微信支付或者是支付宝支付。另外一种是支持银行转账的方式，然后使用银行转账的方式需要包含开户银行以及开户账号信息，包括详细的转账金额。

使用微信支付和支付宝支付：

- 包含基本的字段
- 交易时间
- 交易金额

使用银行卡支付：

- 开户银行
- 开户账户
- 交易金额

### 4.8 参与公益物资捐赠活动功能

### 4.9 物流商添加物品物流信息功能

### 4.10 代理商签收物资功能

### 4.11 公益活动反馈功能

#### 4.12 公益溯源中心

公益溯源一共分为三部分的溯源：

1. 捐款溯源记录
   1. 捐款溯源记录有交易哈希、区块高度等信息
2. 物资捐赠记录
   1. 物资捐赠记录有交易哈希、区块高度等信息
3. 银行转账记录
   1. 银行转账有银行卡转账银行卡的交易记录信息，包括交易哈希以及区块高度等信息。

## 5.用户界面设计

### 5.1 页面布局

## 6.数据设计

### 6.1 数据模型

#### 6.1.1 实体

#### 6.1.2 属性

#### 6.1.3 关系

### 6.2 数据存储和处理

#### 6.2.1 数据库选择

#### 6.2.2 数据访问方式

#### 6.2.3 数据处理逻辑

## 7.性能和安全设计

### 7.1 性能优化策略

#### 7.1.1 缓存机制

#### 7.1.2 异步处理

#### 7.1.3 负载均衡

### 7.2 安全策略

#### 7.2.1 身份验证

#### 7.2.2 访问控制

#### 7.2.3 数据加密

#### 7.2.4 安全审计

## 8.用户测试和反馈

### 8.1 用户测试计划

#### 8.1.1 测试范围

#### 8.1.2 测试方法

#### 8.1.3 测试指标

### 8.2 用户反馈收集

#### 8.2.1 用户调查

#### 8.2.2 用户访谈

#### 8.2.3 原型测试

## 附录

9.1 术语表 9.2 参考文献 9.3 版本记录

https://blog.csdn.net/bjdiys/article/details/130230405